<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doam Online | Elite Gaming Portal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
        <div class="nav-container">
            <div class="logo-container">
                <a href="{{ url_for('index') }}">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Doam Online Logo">
                </a>
            </div>
            <nav>
                <a href="{{ url_for('index') }}">Home</a>
                <a href="{{ url_for('blog') }}">Blog</a>
                {% if session.get('logged_in') %}
                <a href="{{ url_for('admin_dashboard') }}">Admin</a>
                <a href="{{ url_for('logout') }}">Logout</a>
                {% else %}
                <a href="{{ url_for('login') }}">Login</a>
                {% endif %}
            </nav>
        </div>
    </header>

    <section class="hero">
        <h1>DOAM ONLINE</h1>
        <p>The ultimate sanctuary for legendary games. Discover, download, and dominate the digital realm.</p>
        
        {% if top_games %}
        <div class="top-games-section">
            <h3 class="top-games-title">Top Games</h3>
            <div class="top-games-track">
                {% for game in top_games + top_games %}
                {% set game_index = games.index(game) %}
                <a href="{{ url_for('game_detail', index=game_index) }}" class="top-game-item">
                    <img src="{{ url_for('static', filename='images/' + game.image) if game.image else 'https://via.placeholder.com/250x130' }}" alt="{{ game.title }}">
                    <h4>{{ game.title }}</h4>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </section>

    <div class="container">
        <div class="search-container">
            <input type="text" id="gameSearch" placeholder="Search for legendary games...">
            <span class="search-icon">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 512 512" fill="currentColor"><path d="M302.188,279.563C313.36,263.875,320,244.727,320,224c0-53.032-42.984-96-96-96c-53.017,0-96,42.968-96,96 c0,53.016,42.983,96,96,96c20.727,0,39.875-6.64,55.563-17.812l77.124,77.124c6.25,6.252,16.375,6.252,22.624,0 c6.252-6.249,6.252-16.374,0-22.623L302.188,279.563z M278.953,256.319c-5.53,9.36-13.273,17.104-22.634,22.634 C246.805,284.563,235.843,288,224,288c-35.345,0-64-28.656-64-64s28.655-64,64-64c35.344,0,64,28.656,64,64 C288,235.843,284.563,246.805,278.953,256.319z"/></svg>
            </span>
        </div>
        
        <h2 class="section-title">Latest Releases</h2>
        <div class="game-grid" id="gameGrid">
            {% for game in games %}
            <a href="{{ url_for('game_detail', index=loop.index0) }}" class="game-card game-card-link" 
                 data-index="{{ loop.index0 }}"
                 data-title="{{ game.title }}" 
                 data-description="{{ game.description }}">
                <div class="card-image-wrap">
                    {% if game.image %}
                    <img src="{{ url_for('static', filename='images/' + game.image) }}" alt="{{ game.title }}">
                    {% else %}
                    <img src="https://via.placeholder.com/400x250?text=No+Preview" alt="No Image">
                    {% endif %}
                    <div class="card-overlay"></div>
                </div>
                <div class="game-info-simple">
                    <h3>{{ game.title }}</h3>
                </div>
            </a>
            {% else %}
            <div style="grid-column: 1/-1; text-align: center; padding: 60px; background: var(--glass-bg); border-radius: 20px;">
                <p style="font-family: 'Orbitron', sans-serif; color: var(--accent-gold);">The vault is currently empty. Be the first to forge a legend.</p>
            </div>
            {% endfor %}
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('gameSearch');
            const gameCards = document.querySelectorAll('.game-card');

            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                gameCards.forEach(card => {
                    const title = card.getAttribute('data-title').toLowerCase();
                    const description = card.getAttribute('data-description').toLowerCase();
                    card.style.display = (title.includes(searchTerm) || description.includes(searchTerm)) ? 'block' : 'none';
                });
            });
        });
    </script>

    <footer class="site-footer">
      <div class="footer-content">
        <a href="https://discord.gg/SSAcYPyF" target="_blank" class="discord-link" aria-label="Join our Discord">
          <svg width="26" height="26" viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.369a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.211.375-.444.864-.608 1.249a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.249.077.077 0 0 0-.079-.037 19.736 19.736 0 0 0-4.885 1.515.07.07 0 0 0-.032.027C.533 9.045-.32 13.579.099 18.057a.082.082 0 0 0 .031.056 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.873-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.9.077.077 0 0 1-.008-.128c.126-.094.252-.192.372-.291a.074.074 0 0 1 .077-.01c3.927 1.793 8.18 1.793 12.061 0a.074.074 0 0 1 .078.01c.12.099.246.197.372.291a.077.077 0 0 1-.006.128 12.299 12.299 0 0 1-1.873.899.076.076 0 0 0-.04.107c.36.698.771 1.362 1.225 1.993a.077.077 0 0 0 .084.028 19.876 19.876 0 0 0 6.002-3.03.077.077 0 0 0 .031-.055c.5-5.177-.838-9.673-3.548-13.661a.061.061 0 0 0-.031-.028z"/></svg>
        </a>
      </div>
      <p style="text-align: center; color: var(--text-gray); font-size: 0.8rem; margin-top: 10px;">&copy; 2026 Doam Online. All Rights Reserved.</p>
    </footer>
</body>
</html>
